<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lumina - Spyware Sold Seperately!</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Display:wght@400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Round">
    <link rel="stylesheet" href="style.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="background-image" id="backgroundImage"></div>
    <div class="background-overlay"></div>
    <div class="background-shapes" id="backgroundShapes">
        <div class="floating-shape circle" style="top: 15%; left: 10%;"></div>
        <div class="floating-shape square" style="top: 70%; left: 80%;"></div>
        <div class="floating-shape triangle" style="top: 40%; left: 20%;"></div>
        <div class="floating-shape diamond" style="top: 25%; left: 85%;"></div>
        <div class="floating-shape circle" style="top: 60%; left: 15%;"></div>
        <div class="floating-shape square" style="top: 80%; left: 60%;"></div>
        <div class="floating-shape triangle" style="top: 10%; left: 70%;"></div>
        <div class="floating-shape diamond" style="top: 85%; left: 25%;"></div>
    </div>

    <div class="overlay" id="overlay"></div>

    <div class="weather" id="weather" style="display: none;">
        <div class="weather-temp" id="weatherTemp">--°</div>
        <div class="weather-desc" id="weatherDesc">Loading...</div>
        <div class="weather-location" id="weatherLocation">
            <span class="material-icons-round" style="font-size: 14px;">location_on</span>
            <span>--</span>
        </div>
    </div>

    <div class="clock" id="clock" style="display: none;">
        <div class="clock-time" id="clockTime">--:--</div>
        <div class="clock-date" id="clockDate">--</div>
    </div>

    <div class="calendar" id="calendar" style="display: none;">
        <div class="calendar-header">
            <button class="calendar-nav" id="calendarPrev">
                <span class="material-icons-round">chevron_left</span>
            </button>
            <div class="calendar-month" id="calendarMonth">October 2025</div>
            <div class="calendar-actions">
                <button class="calendar-nav" id="addEventBtn" title="Add Event">
                    <span class="material-icons-round">add</span>
                </button>
                <button class="calendar-nav" id="calendarNext">
                    <span class="material-icons-round">chevron_right</span>
                </button>
            </div>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
    </div>




    <div class="notes-sidebar" id="notesSidebar">
        <div class="notes-header">
            <div class="notes-title">Notes</div>
            <button class="notes-close" id="notesClose">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <div class="notes-tabs" id="notesTabs"></div>
        <div class="notes-content">
            <input type="text" class="notes-title-input" id="notesTitleInput" placeholder="Note title..." autocomplete="off">
            <div class="notes-container">
                <textarea class="notes-textarea" id="notesTextarea" placeholder="Start writing your note..."></textarea>
                <div class="notes-preview" id="notesPreview" style="display: none;"></div>
                <button class="notes-help-btn" id="notesHelpBtn" title="Markdown Help">
                    <span class="material-icons-round">help_outline</span>
                </button>
            </div>
        </div>

        <div class="notes-todo-section" id="notesTodoSection">
            <div class="notes-todo-header">
                <div class="notes-todo-title">
                    <span class="material-icons-round">checklist</span>
                    <span>Tasks</span>
                </div>
                <div class="notes-todo-actions">
                    <select class="todo-category-filter" id="todoCategoryFilter">
                        <option value="">All Categories</option>
                    </select>
                    <button class="notes-todo-add-btn" id="notesTodoAddBtn" title="Add Task">
                        <span class="material-icons-round">add</span>
                    </button>
                </div>
            </div>
            <div class="notes-todo-list" id="notesTodoList"></div>
            <div class="notes-todo-input-area" id="notesTodoInputArea" style="display: none;">
                <input type="text" class="notes-todo-input" id="notesTodoInput" placeholder="Enter task...">
                <select class="notes-todo-category-input" id="notesTodoCategoryInput">
                    <option value="General">General</option>
                    <option value="Work">Work</option>
                    <option value="Personal">Personal</option>
                    <option value="Shopping">Shopping</option>
                    <option value="Health">Health</option>
                </select>
                <div class="notes-todo-input-actions">
                    <button class="notes-todo-save-btn" id="notesTodoSaveBtn">
                        <span class="material-icons-round">check</span>
                    </button>
                    <button class="notes-todo-cancel-btn" id="notesTodoCancelBtn">
                        <span class="material-icons-round">close</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="modal" id="markdownHelpModal" style="max-width: 600px;">
            <div class="modal-title">Markdown Guide</div>
            <div class="markdown-help-content">
                <div class="markdown-section">
                    <h4>Text Formatting</h4>
                    <div class="markdown-example">
                        <code>**bold text**</code> → <strong>bold text</strong><br>
                        <code>*italic text*</code> → <em>italic text</em><br>
                        <code>~~strikethrough~~</code> → <del>strikethrough</del>
                    </div>
                </div>

                <div class="markdown-section">
                    <h4>Headers</h4>
                    <div class="markdown-example">
                        <code># Main Title</code> → <h1>Main Title</h1>
                        <code>## Section</code> → <h2>Section</h2>
                        <code>### Subsection</code> → <h3>Subsection</h3>
                    </div>
                </div>

                <div class="markdown-section">
                    <h4>Lists</h4>
                    <div class="markdown-example">
                        <code>- Item 1<br>- Item 2</code> → <ul><li>Item 1</li><li>Item 2</li></ul>
                        <code>1. First<br>2. Second</code> → <ol><li>First</li><li>Second</li></ol>
                    </div>
                </div>

                <div class="markdown-section">
                    <h4>Links & Code</h4>
                    <div class="markdown-example">
                        <code>[Link Text](URL)</code> → <a href="#">Link Text</a><br>
                        <code>`inline code`</code> → <code>inline code</code><br>
                        <code>```code block```</code> → <pre>code block</pre>
                    </div>
                </div>

                <div class="markdown-section">
                    <h4>Toggle Preview</h4>
                    <p>Type in the text area and see your markdown rendered live! Click the eye icon to toggle between edit and preview modes.</p>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn primary" id="closeMarkdownHelp">Got it!</button>
            </div>
        </div>
    </div>

    <button class="notes-toggle" id="notesToggle">
        <span class="material-icons-round">notes</span>
    </button>

    <div class="bookmarks-sidebar" id="bookmarksSidebar">
        <div class="bookmarks-header">
            <div class="bookmarks-title">Bookmarks</div>
            <button class="bookmarks-close" id="bookmarksClose">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <div class="bookmarks-content">
            <div class="bookmarks-actions">
                <button class="bookmarks-add-btn" id="addBookmarkBtn">
                    <span class="material-icons-round">add</span>
                    Add Bookmark
                </button>
                <button class="bookmarks-import-btn" id="importBookmarksBtn">
                    <span class="material-icons-round">upload</span>
                    Import from Browser
                </button>
            </div>
            <div class="bookmarks-list" id="bookmarksList"></div>
        </div>
    </div>

    <button class="bookmarks-toggle" id="bookmarksToggle">
        <span class="material-icons-round">bookmark</span>
    </button>

    <div class="container">
        <div class="header">
            <div class="logo" onclick="location.reload()">lumina</div>
            <div class="header-actions">
                <button class="icon-btn" id="searchHistoryBtn" title="Search History">
                    <span class="material-icons-round">history</span>
                </button>
                <button class="icon-btn" id="infoBtn" title="About Lumina">
                    <span class="material-icons-round">help_outline</span>
                </button>
                <button class="icon-btn" id="darkModeBtn" title="Toggle dark mode">
                    <span class="material-icons-round">dark_mode</span>
                </button>
                <button class="icon-btn" id="themeBtn" title="Color theme">
                    <span class="material-icons-round">palette</span>
                </button>
                <button class="icon-btn" id="settingsBtn" title="Settings">
                    <span class="material-icons-round">tune</span>
                </button>
            </div>
        </div>

        <div class="search-section">
            <div class="greeting" id="greeting" style="display: none;">
                <div class="greeting-text" id="greetingText">Good morning!</div>
            </div>
            <form class="search-container" id="searchForm">
                <span class="material-icons-round search-icon">search</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Search the web..." autocomplete="off" autofocus>
                <button type="button" class="voice-search-btn" id="voiceSearchBtn" title="Voice Search">
                    <span class="material-icons-round">mic</span>
                </button>
                <button type="submit" class="search-btn desktop-only" id="searchBtn" title="Search">
                    <span class="material-icons-round">arrow_forward</span>
                </button>
            </form>


            <div class="search-dropdowns-container" id="searchDropdownsContainer" style="position: relative; width: 100%;">
                <div class="search-history-dropdown" id="searchHistoryDropdown" style="display: none;"></div>
                <div class="search-auto-suggestions" id="searchAutoSuggestions" style="display: none;">
                    <div class="auto-suggestion-item" data-suggestion="Google">
                        <span class="material-icons-round">search</span>
                        <span>Search Google</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="YouTube">
                        <span class="material-icons-round">play_circle</span>
                        <span>Search YouTube</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="Discord">
                        <span class="material-icons-round">chat</span>
                        <span>Discord</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="ChatGPT">
                        <span class="material-icons-round">assistant</span>
                        <span>Talk to ChatGPT</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="GitHub">
                        <span class="material-icons-round">code</span>
                        <span>Search GitHub</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="Stack Overflow">
                        <span class="material-icons-round">help_outline</span>
                        <span>Search Stack Overflow</span>
                    </div>
                    <div class="auto-suggestion-item" data-suggestion="Reddit">
                        <span class="material-icons-round">forum</span>
                        <span>Search Reddit</span>
                    </div>
                </div>
            </div>

            <div class="search-suggestions" id="searchSuggestions" style="display: none;"></div>

            <div class="shortcuts" id="shortcuts"></div>
        </div>
    </div>

    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <div class="settings-title">Settings</div>
            <button class="icon-btn" id="closeSettings">
                <span class="material-icons-round">close</span>
            </button>
        </div>

        <div class="settings-content">
            <div class="setting-group">
                <label class="setting-label">Color Theme</label>
                <div class="color-grid" id="colorGrid"></div>
            </div>

            <div class="setting-group">
                <label class="setting-label">Accessibility</label>
                <div class="toggle-option" id="highContrastToggle">
                    <span>High Contrast Mode</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
            </div>

        <div class="setting-group" id="customThemeGroup">
            <div class="setting-group-header" id="customThemeHeader">
                <label class="setting-label" style="margin: 0;">Custom Theme Creator</label>
                <span class="material-icons-round">expand_more</span>
            </div>
            <div class="setting-group-content" id="customThemeContent">
                <div class="theme-customization-panel">
                    <div class="color-pickers-grid">
                        <div class="color-picker-item">
                            <label>Primary Color</label>
                            <div class="custom-color-picker" id="primaryColorPicker" data-color="#6750A4" data-color-key="primary">
                                <div class="color-swatch" style="background-color: #6750A4;"></div>
                                <span class="color-value">#6750A4</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="primaryColorText" value="#6750A4">
                        </div>
                        <div class="color-picker-item">
                            <label>Primary Container</label>
                            <div class="custom-color-picker" id="primaryContainerColorPicker" data-color="#E9DDFF" data-color-key="primaryContainer">
                                <div class="color-swatch" style="background-color: #E9DDFF;"></div>
                                <span class="color-value">#E9DDFF</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="primaryContainerColorText" value="#E9DDFF">
                        </div>
                        <div class="color-picker-item">
                            <label>On Primary Container</label>
                            <div class="custom-color-picker" id="onPrimaryContainerColorPicker" data-color="#22005D" data-color-key="onPrimaryContainer">
                                <div class="color-swatch" style="background-color: #22005D;"></div>
                                <span class="color-value">#22005D</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="onPrimaryContainerColorText" value="#22005D">
                        </div>
                        <div class="color-picker-item">
                            <label>Secondary Color</label>
                            <div class="custom-color-picker" id="secondaryColorPicker" data-color="#625B71" data-color-key="secondary">
                                <div class="color-swatch" style="background-color: #625B71;"></div>
                                <span class="color-value">#625B71</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="secondaryColorText" value="#625B71">
                        </div>
                        <div class="color-picker-item">
                            <label>Secondary Container</label>
                            <div class="custom-color-picker" id="secondaryContainerColorPicker" data-color="#E8DEF8" data-color-key="secondaryContainer">
                                <div class="color-swatch" style="background-color: #E8DEF8;"></div>
                                <span class="color-value">#E8DEF8</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="secondaryContainerColorText" value="#E8DEF8">
                        </div>
                        <div class="color-picker-item">
                            <label>Tertiary Color</label>
                            <div class="custom-color-picker" id="tertiaryColorPicker" data-color="#7E5260" data-color-key="tertiary">
                                <div class="color-swatch" style="background-color: #7E5260;"></div>
                                <span class="color-value">#7E5260</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="tertiaryColorText" value="#7E5260">
                        </div>
                        <div class="color-picker-item">
                            <label>Tertiary Container</label>
                            <div class="custom-color-picker" id="tertiaryContainerColorPicker" data-color="#FFD9E3" data-color-key="tertiaryContainer">
                                <div class="color-swatch" style="background-color: #FFD9E3;"></div>
                                <span class="color-value">#FFD9E3</span>
                                <span class="material-icons-round color-dropdown-arrow">arrow_drop_down</span>
                            </div>
                            <input type="hidden" id="tertiaryContainerColorText" value="#FFD9E3">
                        </div>
                    </div>


                    <div class="theme-preview">
                        <div class="theme-preview-card">
                            <div class="preview-header">Theme Preview</div>
                            <div class="preview-content">
                                <div class="preview-primary" id="previewPrimary"></div>
                                <div class="preview-secondary" id="previewSecondary"></div>
                                <div class="preview-surface" id="previewSurface"></div>
                                <div class="preview-text">Sample text to preview your theme</div>
                            </div>
                        </div>
                    </div>

                    <div class="theme-actions">
                        <button class="theme-btn secondary" id="resetCustomTheme">
                            <span class="material-icons-round">refresh</span>
                            Reset to Current
                        </button>
                        <button class="theme-btn primary" id="applyCustomTheme">
                            <span class="material-icons-round">preview</span>
                            Apply Theme
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-group" id="themeManagementGroup">
            <div class="setting-group-header" id="themeManagementHeader">
                <label class="setting-label" style="margin: 0;">Theme Management</label>
                <span class="material-icons-round">expand_more</span>
            </div>
            <div class="setting-group-content" id="themeManagementContent">
                <div class="theme-management-panel">
                    <div class="font-selection-management">
                        <label class="setting-label">Font Family</label>
                        <select id="fontFamilySelect">
                            <option value="'Google Sans', sans-serif">Google Sans</option>
                            <option value="Inter, sans-serif">Inter</option>
                            <option value="Roboto, sans-serif">Roboto</option>
                            <option value="'Open Sans', sans-serif">Open Sans</option>
                            <option value="Lato, sans-serif">Lato</option>
                            <option value="Montserrat, sans-serif">Montserrat</option>
                            <option value="Poppins, sans-serif">Poppins</option>
                            <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                            <option value="Nunito, sans-serif">Nunito</option>
                            <option value="Raleway, sans-serif">Raleway</option>
                            <option value="Ubuntu, sans-serif">Ubuntu</option>
                            <option value="'Playfair Display', serif">Playfair Display</option>
                            <option value="Merriweather, serif">Merriweather</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                        </select>
                        <div id="currentFontDisplay" style="margin-top: 8px; font-size: 12px; color: var(--md-sys-color-on-surface-variant);">Current: Google Sans</div>
                    </div>

                    <div class="custom-themes-list" id="customThemesList">
                        <div class="no-custom-themes" id="noCustomThemes">
                            <span class="material-icons-round">palette</span>
                            <p>No custom themes yet. Create one above!</p>
                        </div>
                    </div>

                    <div class="theme-management-actions">
                        <div class="theme-save-section">
                            <input type="text" id="themeNameInput" placeholder="Theme name..." style="flex: 1; margin-right: 8px;">
                            <button class="theme-btn primary" id="saveCustomTheme">
                                <span class="material-icons-round">save</span>
                                Save Theme
                            </button>
                        </div>

                        <div class="theme-import-export">
                            <button class="theme-btn secondary" id="exportTheme">
                                <span class="material-icons-round">download</span>
                                Export Theme
                            </button>
                            <button class="theme-btn secondary" id="importTheme">
                                <span class="material-icons-round">upload</span>
                                Import Theme
                            </button>
                            <input type="file" id="importThemeFile" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-group">
            <label class="setting-label">Widgets</label>
            <div class="setting-group-content">
                <div class="toggle-option" id="weatherToggle">
                    <span>Weather</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="clockToggle">
                    <span>Clock</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="calendarToggle">
                    <span>Calendar</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="shortcutsToggle">
                    <span>Shortcuts</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="greetingToggle">
                    <span>Greeting</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-group" id="mobileModeGroup">
            <div class="setting-group-header" id="mobileModeHeader">
                <label class="setting-label" style="margin: 0;">Mobile Mode</label>
                <span class="material-icons-round">expand_more</span>
            </div>
            <div class="setting-group-content" id="mobileModeContent">
                <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-high); border-radius: 16px; margin-bottom: 16px;">
                    <div style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 8px;">
                        <strong>Current Mode:</strong> <span id="currentModeDisplay">Desktop</span>
                    </div>
                    <div style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 8px;">
                        <strong>Device Type:</strong> <span id="deviceTypeDisplay">Unknown</span>
                    </div>
                    <div id="browserInfoDisplay" style="margin-top: 12px; padding: 12px; background: var(--md-sys-color-surface-container-low); border-radius: 8px;"></div>
                </div>
                <div class="toggle-option" id="forceMobileModeToggle">
                    <span>Force Mobile Mode</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="forceDesktopModeToggle">
                    <span>Force Desktop Mode</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="hideWidgetsOnMobileToggle">
                    <span>Hide Widgets on Mobile</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="hideKeyboardShortcutsOnMobileToggle">
                    <span>Hide Shortcuts on Mobile</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="mobileOptimizedSearchToggle">
                    <span>Optimized Search</span>
                    <div class="switch active">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-group" id="devOptionsGroup">
            <div class="setting-group-header" id="devOptionsHeader">
                <label class="setting-label" style="margin: 0;">Developer Options</label>
                <span class="material-icons-round">expand_more</span>
            </div>
            <div class="setting-group-content">
                <div class="toggle-option" id="searchSuggestionsToggle">
                    <span>Search Suggestions</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="openInSameTabToggle">
                    <span>Open in Same Tab</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>
                <div class="toggle-option" id="shiftEnterToggle">
                    <span>Shift+Enter to Search</span>
                    <div class="switch">
                        <div class="switch-thumb"></div>
                    </div>
                </div>

                <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-high); border-radius: 16px; margin-bottom: 12px;">
                    <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 8px; color: var(--md-sys-color-on-surface);">Manual City Override</label>
                    <input type="text" id="manualCity" placeholder="e.g., San Francisco, CA" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline-variant); background: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); font-family: 'Google Sans', sans-serif; font-size: 14px;">
                </div>

                <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-high); border-radius: 16px; margin-bottom: 12px;">
                    <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 12px; color: var(--md-sys-color-on-surface);">Search Engine</label>
                    <select id="searchEngine" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline-variant); background: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); font-family: 'Google Sans', sans-serif; font-size: 14px; margin-bottom: 8px;">
                        <option value="duckduckgo">DuckDuckGo (Privacy-focused)</option>
                        <option value="google">Google</option>
                        <option value="bing">Bing</option>
                        <option value="brave">Brave Search</option>
                        <option value="custom">Custom Search Engine</option>
                    </select>
                    <input type="text" id="customSearchEngine" placeholder="e.g., search.example.com" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline-variant); background: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); font-family: 'Google Sans', sans-serif; font-size: 14px; display: none;">
                    <div style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-top: 4px;">Choose your search engine. DuckDuckGo is the default for privacy.</div>
                </div>

            </div>
        </div>

        <div class="setting-group" id="customCssGroup">
            <div class="setting-group-header" id="customCssHeader">
                <label class="setting-label" style="margin: 0;">Custom CSS Injection</label>
                <span class="material-icons-round">expand_more</span>
            </div>
            <div class="setting-group-content" id="customCssContent">
                <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-high); border-radius: 16px; margin-bottom: 16px;">
                    <div style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 12px; padding: 8px 12px; background: var(--md-sys-color-warning-container); border-radius: 8px; border-left: 3px solid var(--md-sys-color-warning);">
                        <strong>Remember:</strong> only inject CSS from people you trust. Malicious CSS can break the interface or add security risks for you.
                    </div>
                    <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 8px; color: var(--md-sys-color-on-surface);">Custom CSS Code</label>
                    <textarea id="customCssInput" placeholder="/* Enter your custom CSS here */
/* Example: */
/* .search-input { border-radius: 50px !important; } */
/* .logo { animation: spin 2s linear infinite; } */" style="width: 100%; height: 120px; padding: 12px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline-variant); background: var(--md-sys-color-surface); color: var(--md-sys-color-on-surface); font-family: 'Courier New', monospace; font-size: 13px; resize: vertical; outline: none; transition: all 0.3s;" oninput="validateAndPreviewCss()"></textarea>
                    <div style="margin-top: 8px; display: flex; gap: 8px; align-items: center;">
                        <div id="cssValidationStatus" style="font-size: 12px; color: var(--md-sys-color-on-surface-variant);">
                            Ready to inject custom CSS
                        </div>
                        <div style="flex: 1;"></div>
                        <button id="resetCustomCssBtn" style="padding: 6px 12px; border-radius: 8px; border: 1px solid var(--md-sys-color-outline-variant); background: var(--md-sys-color-surface-container-high); color: var(--md-sys-color-on-surface-variant); font-size: 12px; cursor: pointer; transition: all 0.3s;" onclick="resetCustomCss()">
                            <span class="material-icons-round" style="font-size: 14px; vertical-align: middle; margin-right: 4px;">refresh</span>
                            Reset
                        </button>
                        <button id="applyCustomCssBtn" style="padding: 6px 12px; border-radius: 8px; border: none; background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); font-size: 12px; cursor: pointer; transition: all 0.3s;" onclick="applyCustomCss()">
                            <span class="material-icons-round" style="font-size: 14px; vertical-align: middle; margin-right: 4px;">code</span>
                            Apply CSS
                        </button>
                    </div>
                </div>

                <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-low); border-radius: 16px; margin-bottom: 16px; border: 1px solid var(--md-sys-color-outline-variant);">
                    <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 12px; color: var(--md-sys-color-on-surface);">Live Preview Area</label>
                    <div id="cssPreviewArea" style="background: var(--md-sys-color-surface); border: 1px solid var(--md-sys-color-outline-variant); border-radius: 12px; padding: 16px; min-height: 80px; position: relative;">
                        <div style="font-size: 14px; color: var(--md-sys-color-on-surface); margin-bottom: 8px;">Sample content to preview your CSS changes</div>
                        <button class="preview-btn" style="padding: 8px 16px; border-radius: 8px; border: none; background: var(--md-sys-color-primary-container); color: var(--md-sys-color-on-primary-container); font-size: 13px; cursor: pointer;">Preview Button</button>
                        <div class="preview-text" style="margin-top: 12px; padding: 8px; background: var(--md-sys-color-surface-container-high); border-radius: 6px; font-size: 12px; color: var(--md-sys-color-on-surface-variant);">This area shows how your custom CSS affects various elements.</div>
                    </div>
                </div>

                <div style="padding: 16px 20px; background: var(--md-sys-color-info-container); border-radius: 16px; margin-bottom: 16px;">
                    <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 8px; color: var(--md-sys-color-on-info-container);">Tips</label>
                    <div style="font-size: 12px; color: var(--md-sys-color-on-info-container); line-height: 1.4;">
                        • Use CSS selectors to target specific elements<br>
                        • Start with simple changes like colors and spacing<br>
                        • Test your CSS<br>
                        • You can save your CSS with themes for later use
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-group">
            <label class="setting-label">Background</label>
            <div class="toggle-option" id="backgroundShapesToggle">
                <span>Background Shapes</span>
                <div class="switch">
                    <div class="switch-thumb"></div>
                </div>
            </div>
            <div class="toggle-option" id="backgroundImageBtn">
                <span>Upload Background</span>
                <span class="material-icons-round">image</span>
            </div>
            <div class="toggle-option" id="removeBackgroundBtn">
                <span>Remove Background</span>
                <span class="material-icons-round">delete</span>
            </div>
            <div style="padding: 16px 20px; background: var(--md-sys-color-surface-container-high); border-radius: 16px; margin-bottom: 12px;">
                <label style="font-size: 14px; font-weight: 500; display: block; margin-bottom: 8px; color: var(--md-sys-color-on-surface);">Background Opacity</label>
                <input type="range" id="backgroundOpacity" min="0" max="1" step="0.1" style="width: 100%;">
                <div style="font-size: 12px; color: var(--md-sys-color-on-surface-variant); margin-top: 4px;">Adjust background image transparency</div>
            </div>
            <input type="file" id="backgroundImageFile" accept="image/*" style="display: none;">
        </div>

        <div class="setting-group">
            <label class="setting-label">Data Management</label>
            <div class="toggle-option" id="exportBtn">
                <span>Export Settings</span>
                <span class="material-icons-round">download</span>
            </div>
            <div class="toggle-option" id="importBtn">
                <span>Import Settings</span>
                <span class="material-icons-round">upload</span>
            </div>
            <input type="file" id="importFile" accept=".json" style="display: none;">
            <input type="file" id="importBookmarksFile" accept=".html" style="display: none;">
        </div>

        <div class="setting-group">
            <label class="setting-label">Support Lumina</label>
            <div class="donation-section">
                <p style="color: var(--md-sys-color-on-surface-variant); margin-bottom: 16px; font-size: 14px; line-height: 1.5;">
                    Help keep virex.lol our home domain! Your support helps maintain this privacy-focused search engine.
                </p>
                <div class="litecoin-address-compact">
                    <div class="address-display">
                        <span class="address-label">Litecoin Address:</span>
                        <span class="address-value">Lff8Zq8ZEjApxoVo2T1bAV7o1CKSitFp9S</span>
                        <button class="copy-address-btn" id="copyAddressBtn" title="Copy Address">
                            <span class="material-icons-round">content_copy</span>
                        </button>
                    </div>
                </div>
                <button class="donation-info-btn" id="donationInfoBtn">
                    <span class="material-icons-round">info</span>
                    <span>Learn More</span>
                </button>
            </div>
        </div>

            <div class="setting-group">
                <button class="reset-btn" id="resetBtn">
                    <span class="material-icons-round">restore</span>
                    Restore to Defaults
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="shortcutModal">
        <div class="modal-title">Add Shortcut</div>
        <input type="text" class="modal-input" id="shortcutLabel" placeholder="Label (e.g. YouTube)">
        <input type="text" class="modal-input" id="shortcutUrl" placeholder="URL (e.g. https://youtube.com)">
        <input type="text" class="modal-input" id="shortcutIcon" placeholder="Material Icon (e.g. play_circle)">
        <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelShortcut">Cancel</button>
            <button class="modal-btn primary" id="addShortcut">Add</button>
        </div>
    </div>

    <div class="modal" id="infoModal" style="max-width: 700px;">
        <div class="modal-title">Luminfo - AAA is afraid of us</div>
        <div style="line-height: 1.6; color: var(--md-sys-color-on-surface); max-height: 60vh; overflow-y: auto;">

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">What is this?</h3>
                <p>Lumina is a search engine interface i made using plain HTML, CSS, and JavaScript. No frameworks or anything, just the way the gods intended. It's a good privacy-focused alternative to those AAA search pages that are super heavy on your system and track everything you do.</p>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">Why did you make it?</h3>
                <p>I grew tired of search engines that feel slow and cluttered, so I built what puts privacy first and lets you customize everything. It has weather, notes, bookmarks, and a bunch of other features all in one place without feeling bloated and overwhelming. Inspired by Material Design.</p>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">FAQ:</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>What search backends does it use?</strong><br>
                        <span style="font-size: 13px;">This works with DuckDuckGo, Google, Bing, and even your own custom search engine URL. You can use voice search if your browser supports it!</span>
                    </div>
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>How far does personalization go?</strong><br>
                        <span style="font-size: 13px;">It has 12 different color themes, custom backgrounds, and you can drag widgets around wherever you want.</span>
                    </div>
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>AI Features?</strong><br>
                        <span style="font-size: 13px;">Using custom search engines, you can alternatively use Perplexity or Google AI. To avoid bloat, these features arent baked into the search engine or shoved in your face.</span>
                    </div>
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>Is this even reliable??</strong><br>
                        <span style="font-size: 13px;">Yes. Using full error handling and working fallbacks, youll rarely catch issuses. Make sure your browser is supported first.</span>
                    </div>
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>How about productivity? How does this thing even hold up in the long run?</strong><br>
                        <span style="font-size: 13px;">Complete with notes and markdown, bookmarks, weather, clock, calendar, and quick action buttons, its perfect for your productive setups!</span>
                    </div>
                    <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                        <strong>Okay, but, is it even private?</strong><br>
                        <span style="font-size: 13px;">Nope! This doesn't track you, stores everything locally, and uses privacy-focused APIs. Due to storing everything locally, your history and data is safe.</span>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">Heres how it works under the hood.</h3>
                <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                    <p style="margin: 0 0 8px 0;"><strong>Tech Stack:</strong> Using HTML5, CSS3, and JavaScript. No npm packages or build bloat needed!</p>
                    <p style="margin: 0 0 8px 0;"><strong>APIs:</strong> Gets weather from Open-Meteo (which is also privacy-focused) and uses IP location for its weather.</p>
                    <p style="margin: 0;"><strong>Storage:</strong> As stated before, everything saves to your browser's local storage, and you can export/import your settings.</p>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">About me (the developer)</h3>
                <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                    <p>I'm your random Full-stack developer who likes making web apps open-source and for fun that also respects your privacy. I believe in keeping things simple but powerful. Theres no need for unnecessary complexity, this project is open source so anyone can contribute or learn from it!</p>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">Privacy, Plain and Simple</h3>
                <div style="background: var(--md-sys-color-surface-container-low); padding: 12px; border-radius: 8px;">
                    <ul style="margin: 0; padding-left: 16px; font-size: 14px;">
                        <li>No accounts, no tracking, no hidden data collection.</li>
                        <li>Search history and preferences live only in your browser, and never sent online.</li>
                        <li>Clearing cache or cookies wipes everything, earn a clean slate because you need it!</li>
                        <li>Weather uses a rough IP-based location, never GPS or invasive tracking.</li>
                        <li>No analytics, ads, or third-party scripts. Just whats needed to make it work.</li>
                        <li>Everything about data use is open and transparent. Nothing to hide.</li>
                    </ul>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">What's next?</h3>
                <div style="background: var(--md-sys-color-info-container); color: var(--md-sys-color-on-info-container); padding: 12px; border-radius: 8px;">
                    <p>I'll keep making it faster and compatible while adding friendly features that may actually help people become more productive. Accessibility improvements and maybe more customization options are on the list too, all while keeping the privacy-first approach!</p>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="margin: 16px 0 8px 0; color: var(--md-sys-color-primary); font-size: 16px;">Wanna help or have ideas?</h3>
                <p>Your feedback makes this better! If you're a developer, feel free to contribute. If you're a user with suggestions, I'd love to hear them. Let's make the web a bit more private and user-friendly together.</p>
            </div>

        </div>
        <div class="modal-actions">
            <button class="modal-btn primary" id="closeInfo">Thanks!</button>
            <a href="https://github.com/hnpf/lumina-search" target="_blank">
                <button class="modal-btn secondary">Check out the code on GitHub!</button>
            </a>
        </div>
    </div>

    <div class="modal" id="confirmModal" style="max-width: 400px;">
        <div class="modal-title">Delete Note</div>
        <div style="line-height: 1.6; color: var(--md-sys-color-on-surface); text-align: center; margin: 20px 0;">
            <p>Are you sure you want to delete this note?</p>
            <p style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); margin-top: 8px;">This action cannot be undone.</p>
        </div>
        <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelConfirm">Cancel</button>
            <button class="modal-btn delete" id="confirmDelete">Delete</button>
        </div>
    </div>

    <div class="modal" id="bookmarkModal">
        <div class="modal-title">Add Bookmark</div>
        <input type="text" class="modal-input" id="bookmarkLabel" placeholder="Bookmark name (e.g. Google)">
        <input type="text" class="modal-input" id="bookmarkUrl" placeholder="URL (e.g. https://google.com)">
        <input type="text" class="modal-input" id="bookmarkIcon" placeholder="Icon (e.g. search, home, star)">
        <input type="text" class="modal-input" id="bookmarkCategory" placeholder="Category (optional)">
        <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelBookmark">Cancel</button>
            <button class="modal-btn primary" id="addBookmark">Add Bookmark</button>
        </div>
    </div>

    <div class="modal" id="calendarEventModal">
        <div class="modal-title">Add Calendar Event</div>
        <input type="text" class="modal-input" id="eventTitle" placeholder="Event title" autocomplete="off">
        <textarea class="modal-input" id="eventDescription" placeholder="Event description (optional)" rows="3" autocomplete="off"></textarea>
        <input type="date" class="modal-input" id="eventDate" autocomplete="off">
        <div style="display: flex; gap: 12px; margin-bottom: 16px;">
            <input type="time" class="modal-input" id="eventStartTime" placeholder="Start time" style="flex: 1;" autocomplete="off">
            <input type="time" class="modal-input" id="eventEndTime" placeholder="End time" style="flex: 1;" autocomplete="off">
        </div>
        <input type="text" class="modal-input" id="eventCategory" placeholder="Category (e.g. Work, Personal)" autocomplete="off">
        <div style="margin-bottom: 16px;">
            <label style="display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--md-sys-color-on-surface);">Event Color</label>
            <div style="display: flex; gap: 8px;">
                <button class="color-option active" data-color="#3498db" style="background-color: #3498db;"></button>
                <button class="color-option" data-color="#2ecc71" style="background-color: #2ecc71;"></button>
                <button class="color-option" data-color="#e74c3c" style="background-color: #e74c3c;"></button>
                <button class="color-option" data-color="#f39c12" style="background-color: #f39c12;"></button>
                <button class="color-option" data-color="#9b59b6" style="background-color: #9b59b6;"></button>
                <button class="color-option" data-color="#1abc9c" style="background-color: #1abc9c;"></button>
            </div>
        </div>
        <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelEvent">Cancel</button>
            <button class="modal-btn primary" id="saveEvent">Save Event</button>
        </div>
    </div>

    <div class="modal" id="keyboardShortcutsModal" style="max-width: 500px;">
        <div class="modal-title">Keyboard Shortcuts</div>
        <div style="line-height: 1.6; color: var(--md-sys-color-on-surface); margin: 20px 0;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                <div>
                    <strong>Ctrl + N</strong><br>
                    <span style="font-size: 14px; color: var(--md-sys-color-on-surface-variant);">Open new tab</span>
                </div>
                <div>
                    <strong>Ctrl + /</strong><br>
                    <span style="font-size: 14px; color: var(--md-sys-color-on-surface-variant);">Toggle shortcuts sidebar</span>
                </div>
                <div>
                    <strong>Ctrl + X</strong><br>
                    <span style="font-size: 14px; color: var(--md-sys-color-on-surface-variant);">Focus search input</span>
                </div>
                <div>
                    <strong>Ctrl + B</strong><br>
                    <span style="font-size: 14px; color: var(--md-sys-color-on-surface-variant);">Toggle bookmarks sidebar</span>
                </div>
            </div>
            <p style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 16px;">
                <strong>Tip:</strong> These shortcuts work from anywhere on the page!
            </p>
        </div>
        <div class="modal-actions">
            <button class="modal-btn primary" id="closeKeyboardShortcuts">Got it!</button>
        </div>
    </div>

    <div class="modal" id="colorPickerModal" style="max-width: 320px;">
        <div class="modal-title">Choose Color</div>
        <div class="color-picker-modal-content">
            <div class="color-picker-canvas-container">
                <canvas id="colorPickerCanvas" width="256" height="256"></canvas>
                <div class="color-picker-cursor" id="colorPickerCursor"></div>
            </div>
            <div class="color-picker-hue-container">
                <canvas id="hueCanvas" width="256" height="32"></canvas>
                <div class="hue-picker-cursor" id="huePickerCursor"></div>
            </div>
            <div class="color-picker-preview">
                <div class="preview-color" id="previewColor"></div>
                <div class="color-input-group">
                    <input type="text" id="colorPickerHexInput" placeholder="#000000" maxlength="7">
                    <div class="alpha-control">
                        <span style="font-size: 11px; color: var(--md-sys-color-on-surface-variant);">Opacity:</span>
                        <input type="range" id="colorPickerAlpha" min="0" max="1" step="0.01" value="1">

                    </div>
                </div>
            </div>
            <div class="color-picker-presets">
                <div class="preset-color" data-color="#6750A4" style="background-color: #6750A4;"></div>
                <div class="preset-color" data-color="#E9DDFF" style="background-color: #E9DDFF;"></div>
                <div class="preset-color" data-color="#22005D" style="background-color: #22005D;"></div>
                <div class="preset-color" data-color="#625B71" style="background-color: #625B71;"></div>
                <div class="preset-color" data-color="#E8DEF8" style="background-color: #E8DEF8;"></div>
                <div class="preset-color" data-color="#7E5260" style="background-color: #7E5260;"></div>
                <div class="preset-color" data-color="#FFD9E3" style="background-color: #FFD9E3;"></div>
                <div class="preset-color" data-color="#FEF7FF" style="background-color: #FEF7FF;"></div>
                <div class="preset-color" data-color="#1D1B20" style="background-color: #1D1B20;"></div>
                <div class="preset-color" data-color="#FFFFFF" style="background-color: #FFFFFF; border: 1px solid #ddd;"></div>
            </div>
        </div>
        <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelColorPicker">Cancel</button>
            <button class="modal-btn primary" id="applyColorPicker">Apply</button>
        </div>
    </div>

    <div class="modal" id="searchHistoryModal" style="max-width: 500px;">
        <div class="modal-title">Search History</div>
        <div class="search-history-modal-content">
            <div class="search-history-modal-header">
                <button class="modal-btn secondary" id="clearAllHistoryBtn">
                    <span class="material-icons-round">delete_sweep</span>
                    Clear All
                </button>
                <button class="modal-btn primary" id="closeSearchHistoryModal">
                    <span class="material-icons-round">close</span>
                    Close
                </button>
            </div>
            <div class="search-history-modal-list" id="searchHistoryModalList"></div>
        </div>
    </div>

    <div class="modal" id="donationModal" style="max-width: 450px;">
        <div class="modal-title">Help keep virex.lol our home domain!</div>
        <div style="line-height: 1.6; color: var(--md-sys-color-on-surface); margin: 20px 0;">
            <div style="background: var(--md-sys-color-surface-container-low); padding: 20px; border-radius: 16px; margin-bottom: 20px; text-align: center; border: 2px solid var(--md-sys-color-primary);">
                <div style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); margin-bottom: 12px;">
                    Your support helps maintain this privacy-focused search engine and keep our domain running!
                </div>
                <div style="background: var(--md-sys-color-surface-container-high); padding: 16px; border-radius: 12px; margin-bottom: 16px; word-break: break-all; font-family: monospace; font-size: 16px; font-weight: 600; color: var(--md-sys-color-primary); border: 1px solid var(--md-sys-color-outline-variant);">
                    Lff8Zq8ZEjApxoVo2T1bAV7o1CKSitFp9S
                </div>
                <div style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                    <button class="modal-btn secondary" id="copyLitecoinAddress">
                        <span class="material-icons-round">content_copy</span>
                        Copy Address
                    </button>
                    <button class="modal-btn primary" id="openSettingsFromModal">
                        <span class="material-icons-round">tune</span>
                        Open Settings
                    </button>
                </div>
            </div>
            <p style="font-size: 14px; color: var(--md-sys-color-on-surface-variant); text-align: center; margin: 0;">
                Thank you for your support! Every contribution helps keep Lumina free and privacy-focused.
            </p>
        </div>
        <div class="modal-actions">
            <button class="modal-btn secondary" id="dontShowAgainBtn">
                <span class="material-icons-round">visibility_off</span>
                Don't Show Again
            </button>
            <button class="modal-btn primary" id="closeDonationModal">
                <span class="material-icons-round">close</span>
                Close
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
